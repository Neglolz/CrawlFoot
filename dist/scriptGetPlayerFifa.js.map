{"version":3,"sources":["../scriptGetPlayerFifa.js"],"names":["player","require","db","mongoose","XMLHttpRequest","numPage","makeAjaxCall","url","methodType","xhr","open","send","onreadystatechange","readyState","status","console","log","resp","responseText","respJson","JSON","parse","nbPlayerPage","items","length","p","_idPlayer","id","_lien","link","_nomCommun","commonName","_nom","lastName","_prenom","firstName","_nationalite","nation","name","_taille","height","_poids","weight","_Pied","foot","_dateNaissance","birthdate","_age","age","_poste","position","_club","club","nom","_stats","technique","controles","ballcontrol","dribbles","dribbling","defense","marquage","marking","tacles","slidingtackle","mental","potentiel","potential","reactivite","reactions","placementOf","positioning","interception","interceptions","vista","vision","passes","centre","crossing","courte","shortpassing","longue","longpassing","physique","acceleration","endurance","stamina","force","strength","equilibre","balance","vitesse","sprintspeed","agilite","agility","detente","jumping","tirs","tete","headingaccuracy","frappe","shotpower","finition","finishing","tirsLointain","longshots","effet","curve","cf","freekickaccuracy","penalty","penalties","volee","volleys","gardien","placement","gkpositioning","plongeon","gkdiving","main","gkhandling","pied","gkkicking","reflexes","gkreflexes","Player","lien","nomCommun","prenom","nationalite","taille","poids","Pied","dateNaissance","poste","stats","save","e","message","URL"],"mappings":"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","file":"scriptGetPlayerFifa.js","sourcesContent":["/**\n * Created by johnnyribeiro on 05/10/2017.\n */\nconst player = require('./models/player')\nconst db = require('./db.js')\nconst mongoose = require('mongoose')\n\nlet XMLHttpRequest = require(\"xmlhttprequest\").XMLHttpRequest;\n\nfor(let numPage = 1; numPage<= 564 ; numPage ++){\n\nfunction makeAjaxCall(url, methodType){\n    let xhr = new XMLHttpRequest();\n    xhr.open(methodType, url, true);\n    xhr.send();\n    xhr.onreadystatechange = function(){\n    if (xhr.readyState === 4){\n        if (xhr.status === 200){\n            console.log(\"xhr done successfully\");\n            var resp = xhr.responseText;\n            var respJson = JSON.parse(resp);\n\n            //boucle sur chaque items de la 'page' de joueur\n            for( let nbPlayerPage = 0; nbPlayerPage < respJson.items.length; nbPlayerPage ++){\n                //console.log(respJson.items[nbPlayerPage].firstName)\n                //console.log(nbPlayerPage)\n\n                let p = respJson.items[nbPlayerPage]\n                // création de l'objet à enregistrer en base\n                let _idPlayer = p.id\n                let _lien = p.link\n                let _nomCommun = p.commonName\n                let _nom = p.lastName\n                let _prenom = p.firstName\n                let _nationalite = p.nation.name\n                let _taille = p.height\n                let _poids = p.weight\n                let _Pied = p.foot\n                let _dateNaissance = p.birthdate\n                let _age = p.age\n                let _poste = p.position\n\n                let _club = {\n                    id: p.club.id,\n                    nom: p.club.name\n                }\n                let _stats = {\n                    technique: {\n                        controles: p.ballcontrol,\n                        dribbles: p.dribbling,\n                    },\n                    defense: {\n                        marquage: p.marking,\n                        tacles: p.slidingtackle,\n                    },\n                    mental: {\n                        potentiel: p.potential ,\n                        reactivite: p.reactions,\n                        placementOf: p.positioning,\n                        interception: p.interceptions,\n                        vista: p.vision,\n                    },\n                    passes: {\n                        centre: p.crossing,\n                        courte: p.shortpassing,\n                        longue: p.longpassing,\n                    },\n                    physique: {\n                        acceleration: p.acceleration,\n                        endurance: p.stamina,\n                        force: p.strength,\n                        equilibre: p.balance,\n                        vitesse: p.sprintspeed,\n                        agilite: p.agility,\n                        detente: p.jumping,\n                    },\n                    tirs: {\n                        tete: p.headingaccuracy,\n                        frappe: p.shotpower,\n                        finition: p.finishing,\n                        tirsLointain: p.longshots,\n                        effet: p.curve,\n                        cf: p.freekickaccuracy,\n                        penalty: p.penalties,\n                        volee: p.volleys,\n                    },\n                    gardien: {\n                        placement: p.gkpositioning,\n                        plongeon: p.gkdiving,\n                        main: p.gkhandling,\n                        pied: p.gkkicking,\n                        reflexes: p.gkreflexes,\n                    }\n                }\n\n                ////////////////////////////////////////////////////////////////////////////////////////\n                let Player = new player({\n                    id: _idPlayer,\n                    lien: _lien,\n                    nomCommun: _nomCommun,\n                    nom: _nom,\n                    prenom: _prenom,\n                    nationalite: _nationalite,\n                    taille: _taille,\n                    poids: _poids,\n                    Pied: _Pied,\n                    dateNaissance: _dateNaissance,\n                    age: _age,\n                    poste: _poste,\n                    club: {\n                        id: _club.id,\n                        nom: _club.nom\n                    },\n                    stats: {\n                        technique: {\n                            controles: _stats.technique.controles,\n                            dribbles: _stats.technique.dribbles,\n                        },\n                        defense: {\n                            marquage: _stats.defense.marquage,\n                            tacles: _stats.defense.tacles,\n                        },\n                        mental: {\n                            potentiel: _stats.mental.potentiel,\n                            reactivite: _stats.mental.reactivite,\n                            placementOf: _stats.mental.placementOf,\n                            interception: _stats.mental.interception,\n                            vista: _stats.mental.vista,\n                        },\n                        passes: {\n                            centre: _stats.passes.centre,\n                            courte: _stats.passes.courte,\n                            longue: _stats.passes.longue,\n                        },\n                        physique: {\n                            acceleration: _stats.physique.acceleration,\n                            endurance: _stats.physique.endurance,\n                            force: _stats.physique.force,\n                            equilibre: _stats.physique.equilibre,\n                            vitesse: _stats.physique.vitesse,\n                            agilite: _stats.physique.agilite,\n                            detente: _stats.physique.detente,\n                        },\n                        tirs: {\n                            tete: _stats.tirs.tete,\n                            frappe: _stats.tirs.frappe,\n                            finition: _stats.tirs.finition,\n                            tirsLointain: _stats.tirs.tirsLointain,\n                            effet: _stats.tirs.effet,\n                            cf: _stats.tirs.cf,\n                            penalty: _stats.tirs.penalty,\n                            volee: _stats.tirs.volee,\n                        },\n                        gardien: {\n                            placement: _stats.gardien.placement,\n                            plongeon: _stats.gardien.plongeon,\n                            main: _stats.gardien.main,\n                            pied: _stats.gardien.pied,\n                            reflexes: _stats.gardien.reflexes,\n                        }\n                    }\n                })\n                try{\n                    Player.save();\n                }catch(e){\n                    console.log(e.message)\n                }\n\n\n\n\n\n\n            }\n\n\n\n\n        } else {\n            console.log(\"xhr failed\");\n        }\n    } else {\n        console.log(\"xhr processing going on\");\n    }\n}\nconsole.log(\"request sent succesfully\");\n}\nlet URL = \"https://www.easports.com/fifa/ultimate-team/api/fut/item?jsonParamObject=%7B%22page%22:\"+ numPage +\",%22quality%22:%22bronze,silver,gold,rare_bronze,rare_silver,rare_gold%22,%22position%22:%22LF,CF,RF,ST,LW,LM,CAM,CDM,CM,RM,RW,LWB,LB,CB,RB,RWB%22%7D\";\nmakeAjaxCall(URL, \"GET\");\n\n}\nconsole.log('OVER')"]}